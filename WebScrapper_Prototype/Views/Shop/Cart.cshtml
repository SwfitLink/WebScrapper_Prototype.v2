@using WebScrapper_Prototype.Controllers;
@using X.PagedList.Mvc.Core;
@using X.PagedList;
@using Microsoft.AspNetCore.Identity;
@using WebScrapper_Prototype.Areas.Identity.Data;
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@model X.PagedList.IPagedList<WebScrapper_Prototype.Models.Product>
@{
	ViewData["Title"] = "Shopping Cart";
}
<!DOCTYPE html>
<html lang="zxx">
<head>		
	<!-- Title Tag  -->
	<title>Shopping Cart</title>
	<!-- Meta Tag -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name='copyright' content=''>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon -->
		<link rel="icon" type="image/png" href="http://swiftlinkprod-env.eba-s2qbd5re.eu-central-1.elasticbeanstalk.com/favicon.ico/Media/LogoCropped.png">
	<!-- Web Font -->
	<link href="https://fonts.googleapis.com/css?family=Lato:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
	<!-- StyleSheet -->
	<!-- Bootstrap -->
	<link rel="stylesheet" href="~/css/bootstrap.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="~/css/magnific-popup.min.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="~/css/font-awesome.css">
	<!-- Fancybox -->
	<link rel="stylesheet" href="~/css/jquery.fancybox.min.css">
	<!-- Themify Icons -->
	<link rel="stylesheet" href="~/css/themify-icons.css">
	<!-- Jquery Ui -->
	<link rel="stylesheet" href="~/css/jquery-ui.css">
	<!-- Nice Select CSS -->
	<link rel="stylesheet" href="~/css/niceselect.css">
	<!-- Animate CSS -->
	<link rel="stylesheet" href="~/css/animate.css">
	<!-- Flex Slider CSS -->
	<link rel="stylesheet" href="~/css/flex-slider.min.css">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="~/css/owl-carousel.css">
	<!-- Slicknav -->
	<link rel="stylesheet" href="~/css/slicknav.min.css">
	<!-- Alertify -->
	<link rel="stylesheet" href="~/alertifyjs/css/alertify.min.css" />
	<link rel="stylesheet" href="~/alertifyjs/css/themes/default.min.css" />
	<!-- Reset CSS -->
	<link rel="stylesheet" href="~/css/reset.css">
	<!-- Nice Select JS -->
	<link rel="stylesheet" href="~/css/niceselect.css">
	<!-- Temp CSS -->
	<link rel="stylesheet" href="~/css/style.css">
	<!-- Responsive CSS -->
	<link rel="stylesheet" href="~/css/responsive.css">
	<!-- Site CSS -->
	<link rel="stylesheet" href="~/css/site.css">
</head>
<body class="js" onload="fireOncePerSession1();">
	<!-- Preloader -->
	<div class="preloader">
		<div class="preloader-inner">
			<div class="preloader-icon">
				<span></span>
				<span></span>
			</div>
		</div>
	</div>
	<!-- End Preloader -->
	<!-- End Scroll -->
	<div class="header shop">
		<!-- Topbar -->
		<div class="topbar">
			<div class="container">
				<div class="row">
					<div class="col-lg-5 col-md-12 col-12">
						<!-- Top Left -->
						<div class="top-left">
							<ul class="list-main">
								<li><i class="ti-headphone-alt"></i> +27 (081) 565-0206</li>
								<li>
									<i class="ti-email"></i>
									support@swiftlink.com
								</li>
							</ul>
						</div>
						<!--/ End Top Left -->
					</div>
					<div class="col-lg-6 col-md-12 col-12">
						<!-- Top Right -->
						<div class="right-content">
							@if (User.IsInRole("Manager"))
							{
								<ul class="list-main">
									<li><i class="ti-shopping-cart"></i><a href="/Shop/Cart">Cart</a></li>
									<li><i class="ti-bag"></i><a href="#products">Shop</a></li>
									<li><i class="ti-dashboard"></i><a href="/Backend">Backend</a></li>
									<li><i class="ti-power-off"></i><a asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home" , new { area="" })">Logout</a></li>
								</ul>
							}
							else if (User.IsInRole("User"))
							{
								<ul class="list-main">
									<li><i class="ti-shopping-cart"></i><a href="/Shop/Cart">Cart</a></li>
									<li><i class="ti-bag"></i><a href="#products">Shop</a></li>
								</ul>
							}
							else
							{
								<ul class="list-main">
									<li><i class="ti-shopping-cart"></i><a href="/Shop/Cart">Cart</a></li>
									<li><i class="ti-bag"></i><a href="/Shop">Shop</a></li>
									<li><i class="ti-power-off"></i><a href="/User">Sign up</a></li>
								</ul>
							}
						</div>
						<!-- End Top Right -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Topbar -->
		<!-- Middle Inner -->
		<div class="middle-inner">
			<div class="container">
				<div class="row">
					<div class="col-lg-2 col-md-2 col-12">
						<!-- Logo -->
						<div class="logo">
							<a href="/"><img src="/Media/LogoCropped.png" alt="logo"></a>
						</div>
						<!--/ End Logo -->
						<!-- Search Form -->
						<div class="search-top">
							<div class="top-search"><a href="#0"><i class="ti-search"></i></a></div>
							<!-- Search Form -->
							<div class="search-top">
								<form class="search-form">
									@Html.TextBox("SearchString", ViewBag.CurrentFilter as string,
									new {Class="form-control me-2", PlaceHolder="Search Products..."})
									<button value="search" type="submit"><i class="ti-search"></i></button>
								</form>
							</div>
							<!--/ End Search Form -->
						</div>
						<!--/ End Search Form -->
						<div class="mobile-nav"></div>
					</div>
					<div class="col-lg-8 col-md-7 col-12">
						<div class="search-bar-top">
							<div class="search-bar">
								<select>
									<option selected="selected">All Categories</option>
								</select>
								<form>
									@Html.TextBox("SearchString", ViewBag.CurrentFilter as string,
									new {Class="form-control me-2", PlaceHolder="Search Products..."})
									<button class="btnn" type="submit"><i class="ti-search"></i></button>
								</form>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-3 col-12">
						<div class="right-bar">
							<div id="wishList" class="sinlge-bar shopping">
								<a id="wishlistHover" href="#" onclick="loadWishlist()" class="single-icon"><i class="fa fa-heart-o"></i></a>
								<div id="Wishlistbasket" class="shopping-item">
									@if (ViewBag.Wishlist == 1)
									{
										@if (Model.Count() > 0)
										{
											<div class="dropdown-cart-header">
												<span>Items: @Model.Count</span>
												<a href="/Shop/Cart">
													My Wishlist
												</a>
											</div>
											@foreach (var product in Model)
											{
												<ul class="shopping-list">
													<li>
														<a href="#" class="remove" title="Remove this item" onclick="loadDeleteCart('@product.Id')"><i class="fa fa-remove"></i></a>
														<a class="cart-img" href="/Shop/Product/@product.Id">
															<img src="@Url.Action("GetImage", "Backend", new { id = product.Id })" alt="@product.ProductName" />
														</a>
														<h4><a href="/Shop/Product/@product.Id">@product.ProductName.Substring(0,20) ...</a></h4>
														<p class="quantity">
															1x - <span class="amount" style="text-decoration-line:line-through;">R @product.ProductBasePrice</span>
															<span class="amount" style="color:red;font-weight:800;">R @product.ProductSalePrice</span>
														</p>
													</li>
												</ul>
											}
											<div class="bottom"></div>
										}
										else
										{
											<p>Your Wish list is Empty</p>
										}
									}
									else
									{
										<p onclick="loadCart()">Click to load</p>
									}
								</div>
							</div>
							<div id="account" class="sinlge-bar shopping">
								<a id="AccountHover" href="#" onclick="loadAccount()" class="single-icon"><i class="fa fa-user-circle-o"></i></a>
								@if (ViewBag.IsCookie)
								{
									<div id="AccountOptions" class="shopping-item">
										<div class="dropdown-cart-header">
											<p class="h4">@ViewBag.FirstName</p>
										</div>
										<ul class="shopping-list">
											<li>
												<a class="h5" href="/User">Login</a>
											</li>
											<li>
												<a class="h5" href="/User">Register</a>
											</li>
										</ul>
										<div class="bottom">
											<a href="/User/Logout" class="btn animate">Logout</a>
										</div>
									</div>
								}
								else
								{
									<div id="AccountOptions" class="shopping-item">
										<div class="dropdown-cart-header">
											<p>Hello <span class="font-weight-bold">@ViewBag.FirstName</span>,<br /> What would you like to do?</p>
										</div>
										<ul class="shopping-list">
											<li>
												<a class="cart-img" href="/User"><img src="#" alt="UserImage" /></a>
											</li>
											<li>
												<a class="h4" href="/User">My Account</a>
											</li>
											<li>
												<a class="h5" href="/User">My Orders</a>
											</li>
											<li>
												<a class="h6" href="/User">Check Order Status</a>
											</li>
										</ul>
										<div class="bottom">
											<a href="/User/Logout" class="btn animate">Logout</a>
										</div>
									</div>
								}
							</div>
							<div id="shoppingbasket" class="sinlge-bar shopping">
								<a id="basketHover" href="#" onclick="loadCart()" class="single-icon"><i class="ti-bag"></i><span class="total-count">@ViewBag.ItemCount</span></a>
								<!-- Shopping Item -->
								<div class="shopping-item">
									@if (ViewBag.BasketLoad == 1)
									{
										@if (Model.Count() > 0)
										{
											<div class="dropdown-cart-header">
												<span>Items: @Model.Count</span>
												<a href="/Shop/Cart">
													View Cart
												</a>
											</div>
											@foreach (var product in Model)
											{
												<ul class="shopping-list">
													<li>
														<a href="#" class="remove" title="Remove this item" onclick="loadDeleteCart('@product.Id')"><i class="fa fa-remove"></i></a>
														<a class="cart-img" href="/Shop/Product/@product.Id">
															<img src="@Url.Action("GetImage", "Backend", new { id = product.Id })" alt="@product.ProductName" />
														</a>
														<h4><a href="/Shop/Product/@product.Id">@product.ProductName.Substring(0,20) ...</a></h4>
														<p class="quantity">
															1x - <span class="amount" style="text-decoration-line:line-through;">R @product.ProductBasePrice</span>
															<span class="amount" style="color:red;font-weight:800;">R @product.ProductSalePrice</span>
														</p>
													</li>
												</ul>
											}
											<div class="bottom">
												<div class="total">
													<span>Sub Total:</span>
													<span class="total-amount" style="text-decoration-line:line-through; color:red;">R @ViewBag.CartTotalBase</span>
												</div>
												<div class="total">
													<span>Discount:</span>
													<span class="total-amount" style="color:red;font-weight:800;">R @ViewBag.Savings</span>
												</div>
												<div class="total">
													<span>Total:</span>
													<span class="total-amount" style="text-decoration-line:underline">R @ViewBag.CartTotalSale</span>
												</div>
												<a href="/Checkout" class="btn animate">Checkout</a>
											</div>
										}
										else
										{
											<p>Your Cart is Empty</p>
										}
									}
									else
									{
										<p onclick="loadCart()">Click to load</p>
									}
								</div>
								<!--/ End Shopping Item -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Middle Inner -->
		<!-- Header Inner -->
		<div class="header-inner">
			<div class="container">
				<div class="cat-nav-head">
					<div class="row">
						<div class="col-12">
							<div id="shopmenu" class="menu-area">
								<!-- Main Menu -->
								<nav class="navbar navbar-expand-lg">
									<div class="navbar-collapse">
										<div class="nav-inner">
											<ul class="nav main-menu menu navbar-nav">
												<li class="active">
													<a href="/Shop">Shop</a>
												</li>
												<li>
													<a>Upgrade Kits & Combos<i class="ti-angle-down"></i></a>
													<ul class="dropdown">
														<li><a href="/Cart">Upgrade Kits</a></li>
														<li><a href="/Cart">CPUs & Coolers Combos</a></li>
														<li><a href="/Cart">Peripherals Combos</a></li>
													</ul>
												</li>
												<li>
													<a>Trending Products<i class="ti-angle-down"></i><span class="new">New</span></a>
													<ul class="dropdown">
														<li><a href="/Cart">Intels Latest i7 & i5 CPUs</a></li>
														<li><a href="/Cart">AMD Ryzen</a></li>
														<li><a href="/Cart">Nvidia RTX</a></li>
														<li><a href="/Cart">Gaming Peripherals & Accessories</a></li>
													</ul>
												</li>
											</ul>
										</div>
									</div>
								</nav>
								<!--/ End Main Menu -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Header Inner -->
	</div>
	<!--/ End Header -->
	<!-- Breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="bread-inner">
						<ul class="bread-list">
							<li><a href="/">Home<i class="ti-arrow-right"></i></a></li>
							<li><a href="/Shop">Shop<i class="ti-arrow-right"></i></a></li>
							<li class="active"><a href="/Shop/Cart">Cart</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Breadcrumbs -->
	<!-- Shopping Cart -->
	@if (Model.Count() > 0)
	{
		<div class="shopping-cart section">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<!-- Shopping Summery -->
						<table class="table shopping-summery">
							<thead>
								<tr class="main-hading" style="background:antiquewhite">	
									<th></th>
									<th></th>
									<th class="text-center" style="color: #111; background-color:#f7941d4d; font-weight: 700;">Price Before Discount</th>
									<th class="text-center" style="color: #111; background-color:#f7941d4d; font-weight: 700;">Price After Discount</th>
									<th></th>
								</tr>
							</thead>
							<tbody id="Cart">
								@foreach (var product in Model)
								{
									<tr>
										<td class="image" data-title="Image"><img src="@Url.Action("GetImage", "Backend", new { id = product.Id })" alt="@product.ProductName" /></td>
										<td class="product-des" data-title="Description">
											<p class="product-name"><a href="/Shop/Product/@product.Id">@product.ProductName.Substring(0,35) ...</a></p>
										</td>
										<td class="price" data-title="Price" style="padding:0">
											<span class="text-decoration-line-through" style="color:red;">R @product.ProductBasePrice</span><br>
										</td>
										<td class="total-amount" data-title="Total"><span style="font-weight:800; color:forestgreen">R @product.ProductSalePrice</span></td>
										<td class="action" data-title="Remove"><a href="/Shop/Cart" onclick="loadDeleteCart('@product.Id')"><i class="ti-trash remove-icon"></i></a></td>
									</tr>
								}
							</tbody>
						</table>
						<!--/ End Shopping Summery -->
					</div>
				</div>
				<div class="row">
					<div class="col-12">
						<!-- Total Amount -->
						<div class="total-amount">
							<div class="row">
								<div class="col-lg-8 col-md-5 col-12">
									<div class="left">
										<div class="coupon">
											<form action="/Home/UnderConstruction">
												<input name="Coupon" placeholder="Enter Promo Code">
												<button class="btn">Apply</button>
											</form>
										</div>
										<br />
										@if (ViewBag.GetFreeShipping > 0)
										{
											<label>Spend R <span style="text-decoration-line:underline;">@ViewBag.GetFreeShipping</span> to get <b>FREE</b> Shipping</label>
											<br />
											<button class="btn">Help me choose</button>
										}
										else
										{
											<label>Don't worry we got your shipping costs covered!</label>
										}
									</div>
								</div>
								<div class="col-lg-4 col-md-7 col-12">
									<div class="right">
										<ul>
											<li>Cart Subtotal<span class="text-decoration-line-through" style="color:red; text-decoration:line-through;">R @ViewBag.CartTotalBase</span></li>
											<li>Shipping<span>Free</span></li>
											<li style="font-weight:800;">You Save<span style="color:forestgreen;">R @ViewBag.Savings</span></li>
											<li class="last" style="font-weight:500;">You Pay <span style="text-decoration-line:underline">R @ViewBag.CartTotalSale</span></li>
										</ul>
										<div class="button5">
											<a href="/Checkout" class="btn">Checkout</a>
											<a href="/Shop" class="btn">Continue shopping</a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!--/ End Total Amount -->
					</div>
				</div>
			</div>
		</div>
	}
	else
	{
		<section class="hero-slider">
			<!-- Single Slider -->
			<div class="single-slider" style="background-image:url(/Media/Shop/ShoppingCart.png)">
				<div class="container">
					<div class="row no-gutters">
						<div class="col-lg-9 offset-lg-3 col-12">
							<div class="text-inner">
								<div class="row">
									<div class="col-lg-7 col-12" style="background-color:rgba(0, 0, 0, 0.8);">
										<div class="hero-text">
											<h1><span style="color:ghostwhite">Don't forget to add to cart </span>Your Cart is Currently Empty...</h1>
											<p style="color:ghostwhite">Discover the lowest prices on hardware products with our AI-powered ecommerce store. Shop now for unbeatable deals.</p>
											<div class="button" style="padding:25px 0;">
												<a href="/Shop" class="btn">Shop Now!</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ End Single Slider -->
		</section>
	}
	<!--/ End Shopping Cart -->
	<!-- Start Shop Services Area -->
	<section class="shop-services section home">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-rocket"></i>
						<h4>Free shipping</h4>
						<p>Orders over R1000</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-reload"></i>
						<h4>Warranty Included</h4>
						<p>Up to 2 years</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-lock"></i>
						<h4>Secure Payment</h4>
						<p>100% secure payment</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-tag"></i>
						<h4>Best Price</h4>
						<p>Everything is alway on discount</p>
					</div>
					<!-- End Single Service -->
				</div>
			</div>
		</div>
	</section>
	<!-- End Shop Services Area -->
	<!-- Start Shop Newsletter  -->
	<section class="shop-newsletter section">
		<div class="container">
			<div class="inner-top">
				<div class="row">
					<div class="col-lg-8 offset-lg-2 col-12">
						<!-- Start Newsletter Inner -->
						<div class="inner">
							<h4>Newsletter</h4>
							<p> Subscribe to our newsletter and get <span>10%</span> off your first purchase</p>
							<form action="/" method="get" target="_blank" class="newsletter-inner">
								<input name="EMAIL" placeholder="Your email address" required="" type="email">
								<button class="btn">Subscribe</button>
							</form>
						</div>
						<!-- End Newsletter Inner -->
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- End Shop Newsletter -->
	<!-- Start Footer Area -->
	<footer class="footer">
		<!-- Footer Top -->
		<div class="footer-top section">
			<div class="container">
				<div class="row">
					<div class="col-lg-5 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer about">
							<div class="logo">
								<a href="/"><img src="/Media/LogoCropped.png" alt="#"></a>
							</div>
							<p class="text"></p>
							<p class="call">Got Question? Call us 24/7<span><a href="tel:+27815650206">(081) 565 0206</a></span></p>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Information</h4>
							<ul>
								<li><a href="#">About Us</a></li>
								<li><a href="#">Faq</a></li>
								<li><a href="#">Terms & Conditions</a></li>
								<li><a href="#">Contact Us</a></li>
								<li><a href="#">Help</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Customer Service</h4>
							<ul>
								<li><a href="#">Payment Methods</a></li>
								<li><a href="#">Money-back</a></li>
								<li><a href="#">Returns</a></li>
								<li><a href="#">Shipping</a></li>
								<li><a href="#">Privacy Policy</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer social">
							<h4>Get In Tuch</h4>
							<!-- Single Widget -->
							<div class="contact">
								<ul>
									<li>NO. 342 - London Oxford Street.</li>
									<li>012 United Kingdom.</li>
									<li>info@eshop.com</li>
									<li>+032 3456 7890</li>
								</ul>
							</div>
							<!-- End Single Widget -->
							<ul>
								<li><a href="#"><i class="ti-facebook"></i></a></li>
								<li><a href="#"><i class="ti-twitter"></i></a></li>
								<li><a href="#"><i class="ti-flickr"></i></a></li>
								<li><a href="#"><i class="ti-instagram"></i></a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Footer Top -->
		<div class="copyright">
			<div class="container">
				<div class="inner">
					<div class="row">
						<div class="col-lg-6 col-12">
							<div class="left">
								<p>Copyright © 2020 <a href="http://www.wpthemesgrid.com" target="_blank">Wpthemesgrid</a>  -  All Rights Reserved.</p>
							</div>
						</div>
						<div class="col-lg-6 col-12">
							<div class="right">
								<img src="images/payments.png" alt="#">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- /End Footer Area -->
	@section Scripts {
		<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
	}
	<!-- Jquery -->
	<script src="~/js/jquery.min.js"></script>
	<script src="~/js/jquery-migrate-3.0.0.js"></script>
	<script src="~/s/jquery-ui.min.js"></script>
	<!-- Popper JS -->
	<script src="~/js/popper.min.js"></script>
	<!-- Bootstrap JS -->
	<script src="~/js/bootstrap.min.js"></script>
	<!-- Color JS -->
	<script src="~/js/colors.js"></script>
	<!-- Slicknav JS -->
	<script src="~/js/slicknav.min.js"></script>
	<!-- Owl Carousel JS -->
	<script src="~/js/owl-carousel.js"></script>
	<!-- Magnific Popup JS -->
	<script src="~/js/magnific-popup.js"></script>
	<!-- Waypoints JS -->
	<script src="~/js/waypoints.min.js"></script>
	<!-- Countdown JS -->
	<script src="~/js/finalcountdown.min.js"></script>
	<!-- Nice Select JS -->
	<script src="~/js/nicesellect.js"></script>
	<!-- Flex Slider JS -->
	<script src="~/js/flex-slider.js"></script>
	<!-- Alertify -->
	<script src="~/alertifyjs/alertify.min.js"></script>
	<!-- ScrollUp JS -->
	<script src="~/js/scrollup.js"></script>
	<!-- Onepage Nav JS -->
	<script src="~/js/onepage-nav.min.js"></script>
	<!-- Easing JS -->
	<script src="~/js/easing.js"></script>
	<!-- Active JS -->
	<script src="~/js/active.js"></script>

	<!-- Custom Scripts -->
	<!-- Load ProgressBar -->
	<script type="text/javascript">
		const progressBarContainer = document.querySelector("#progressBarContainer");
		const progressBar = document.querySelector("#progressBar");
		let totalPageHeight = document.body.scrollHeight - window.innerHeight;
		let debounceResize;

		window.addEventListener("scroll", () => {
			let newProgressHeight = window.pageYOffset / totalPageHeight;
			progressBar.style.transform = `scale(1,${newProgressHeight})`;
			progressBar.style.opacity = `${newProgressHeight}`;
		}, {
			capture: true,
			passive: true
		});

		window.addEventListener("resize", () => {
			clearTimeout(debounceResize);
			debounceResize = setTimeout(() => {
				totalPageHeight = document.body.scrollHeight - window.innerHeight;
			}, 250);
		});

		progressBarContainer.addEventListener("click", (e) => {
			let newPageScroll = e.clientY / progressBarContainer.offsetHeight * totalPageHeight;
			window.scrollTo({
				top: newPageScroll,
				behavior: 'smooth'
			});
		});
	</script>
	<!--Functions-->
	<script type="text/javascript">
		// [Alertify]
		// Prompt user to accept or decline cookies
		function fireOncePerSession1() {
			if (!sessionStorage.getItem('hasFired1')) {
				$(document).ready(function () {
					alertify.confirm('Cookies', 'We use Cookies to Enhance Your Experience!',
						function () { alertify.success('Accepted') },
						function () { alertify.error('Declined') }).set('movable', false);
				});
				sessionStorage.setItem('hasFired1', true);
			}
		}

		// [Alertify] & [POST]
		// If user is not subscribed then prompt user with pop-up (Delay: 25 secs)
		function SendSubAlert() {
			setTimeout(function () {
				alertify.prompt('Subscribe to Our Weekly Newsletter and get 10% Off Your First Order!', ' Enter Your Email', ' ',
					function (evt, value) {
						$.ajax({
							type: 'POST',
							url: '/Home/UpdateSubscribedStatus',
							data: { email: value },
							success: function () {
								sessionStorage.setItem('hasFired2', true);
							},
							error: function () {
								console.error('Error saving email!');
							}
						});
					},
					function () { alertify.error('Cancel') });
			}, 25000);
		}
		
		// [GET]
		// Load Shopping Cart
		function loadCart() {
			let basketStart = 1;
			$.ajax({
				type: 'GET',
				url: '/Shop/Index',
				data: { basketStart: basketStart },
				success: function (r) {
					$("#shoppingbasket").html($(r).find("#shoppingbasket").html());
				},
				error: function (e) {
					alertify.error('Error: JavaScript Function (loadCart)');
					alertify.error(e);
				}
			});
		}

		// [POST]
		// Delete from Cart
		function loadDeleteCart(productId) {
			$.ajax({
				type: 'POST',
				url: '/Shop/DeleteConfirmed',
				data: { BasketRemovePID: productId },
				success: function (r) {
					$("#shoppingbasket").html($(r).find("#shoppingbasket").html());
					alertify.notify('Removed from Cart!', 'custom', 2, function () { console.log('dismissed'); });
				},
				error: function (e) {
					alertify.error('Error: JavaScript Function (loadAddToCart)');
					alertify.error(e);
				}
			});
		}
	</script>
</body>
</html>